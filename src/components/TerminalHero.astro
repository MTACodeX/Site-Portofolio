---
const lines = [
  "Welcome to mtacodex.dev",
  "Hi, I'm Abdullah Rahmanta",
  "I am a Back-End Developer and Cyber Security Enthusiast in Penetration Testing and Bug Hunting. I focus on identifying vulnerabilities, analyzing attack vectors, and improving application security."
];

import { Icon } from "astro-icon/components";
---

<div class="terminal-wrapper">
  <div class="terminal-window card card--pixel terminal-glow">
    <div class="card__inner terminal-inner">
      <div class="terminal-header">
        <span class="dots">
          <span class="dot red">
            <Icon name="mdi:close" class="winIcon" />
          </span>
          <span class="dot yellow">
            <Icon name="mdi:window-maximize" class="winIcon" />
          </span>
          <span class="dot green">
            <Icon name="mdi:window-minimize" class="winIcon" />
          </span>
        </span>
        <span class="title">terminal@mtacodex</span>
        <!--<span class="chip">@mtacodex</span>-->
      </div>

      <div class="terminal-body" id="terminal"></div>
    </div>
  </div>
</div>

<script define:vars={{ lines }}>
  const speed = 38;
  let lineIndex = 0;
  let charIndex = 0;

  window.addEventListener("DOMContentLoaded", () => {
    typeLine();
  });

  function typeLine() {
    const terminal = document.getElementById("terminal");
    if (!terminal) return;

    const line = document.createElement("div");
    line.className = "terminal-line";
    line.innerHTML = `
      <span class="prompt">⌎</span>
      <span class="text"></span>
      <span class="cursor">█</span>
    `;
    terminal.appendChild(line);

    const textSpan = line.querySelector(".text");
    const cursor = line.querySelector(".cursor");

    function typeChar() {
      if (!textSpan) return;

      if (charIndex < lines[lineIndex].length) {
        textSpan.textContent += lines[lineIndex][charIndex];
        charIndex++;
        terminal.scrollTop = terminal.scrollHeight;
        setTimeout(typeChar, speed);
      } else {
        cursor?.remove();
        charIndex = 0;
        lineIndex++;
        if (lineIndex < lines.length) {
          setTimeout(typeLine, 420);
        }
      }
    }

    typeChar();
  }
</script>

<style>
.terminal-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
}

.terminal-window {
  width: 100%;
  max-width: 1200px;
  display: block;

  text-align: left !important;
}

.terminal-inner {
  padding: 0;
  overflow: hidden;
}

.terminal-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  border-bottom: 1px solid rgba(255,255,255,0.12);
  text-align: left;
}

.dots {
  display: inline-flex;
  gap: 8px;
  align-items: center;
}

.dot {
  width: 14px;
  height: 14px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.red { background: #ff5f56; }
.yellow { background: #ffbd2e; }
.green { background: #27c93f; }

.winIcon {
  width: 9px;
  height: 9px;
  color:black;
}

.title {
  color: rgba(255,255,255,0.78);
  font-family: var(--font-display);
  font-size: 1.15rem;
  letter-spacing: 0.8px;
  user-select: none;
  margin-left: 2px;
}

.chip {
  margin-left: auto;
  padding: 8px 12px;
  border-radius: 12px;
  font-family: var(--font-display);
  font-size: 0.75rem;
  letter-spacing: 0.7px;

  color: rgba(10, 14, 28, 0.92);
  background: rgba(34,197,94,0.95);
  border: 1px solid rgba(34,197,94,0.55);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
}

.terminal-body {
  padding: 18px 18px 22px;
  font-family: var(--font-family);
  font-size: 1.10rem; /* VT323 enak */
  color: rgba(34, 197, 94, 0.95);
  min-height: 230px;
  max-height: 340px;
  overflow-y: auto;
  line-height: 1.6;

  text-align: left !important;

  background: rgba(8, 10, 18, 0.55);
}

.terminal-line {
  display: block;
  margin-bottom: 8px;
}

.prompt {
  margin-right: 15px;
  color: rgba(34, 197, 94, 0.263);
  user-select: none;
}

.text {
  white-space: pre-wrap;
  word-break: break-word;
  text-align: left !important;
}

.cursor {
  margin-left: 2px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.terminal-body::-webkit-scrollbar {
  width: 8px;
}
.terminal-body::-webkit-scrollbar-track {
  background: rgba(8,10,18,0.55);
}
.terminal-body::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.18);
  border-radius: 6px;
}
.terminal-body::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.28);
}

@media (max-width: 768px) {
  .terminal-body {
    font-size: 0.8rem;
    max-height: 320px;
  }

  .title {
  font-size: 0.8rem;
  }

  .chip {
    font-size: 0.7rem;
    padding: 7px 10px;
  }
}
</style>
