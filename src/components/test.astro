---
interface Props {
  title: string;
  description?: string;
  tags?: string[];
  href: string;
}

const { title, description, tags = [], href } = Astro.props;

const badgeClass = (tag: string) => {
  const t = tag.toLowerCase();

  if (t.includes("forensic")) return "badge badge--green";
  if (t.includes("web")) return "badge badge--cyan";
  if (t.includes("reverse")) return "badge badge--purple";
  if (t.includes("mobile")) return "badge badge--amber";
  if (t.includes("crypto")) return "badge badge--amber";
  if (t.includes("pwn") || t.includes("binary")) return "badge badge--amber";

  if (t.includes("easy")) return "badge badge--green";
  if (t.includes("medium")) return "badge badge--amber";
  if (t.includes("hard") || t.includes("insane")) return "badge badge--purple";

  return "badge";
};
---

<a href={href} class="card card--pixel projectCard">
  <div class="card__inner projectInner">
    <div class="left">
      <h3 class="h-title">{title}</h3>
      {description && <p class="p-muted">{description}</p>}

      {tags && tags.length > 0 && (
        <div class="tags">
          {tags.map((tag: string) => (
            <span class={badgeClass(tag)}>{tag}</span>
          ))}
        </div>
      )}
    </div>

    <div class="linkBox" aria-hidden="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M7 17L17 7"></path>
        <path d="M7 7h10v10"></path>
      </svg>
    </div>
  </div>
</a>

<style>
  .projectCard {
    display: block;
    text-decoration: none;
    color: inherit;
  }

  .projectInner {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 16px;
  }

  .left {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 4px;
  }

  .linkBox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.06);
    color: rgba(255, 255, 255, 0.65);
    border: 1px solid rgba(255, 255, 255, 0.10);
    transition: transform var(--transition-fast), background var(--transition-fast), color var(--transition-fast);
    flex-shrink: 0;
  }

  .projectCard:hover .linkBox {
    background: rgba(255, 255, 255, 0.10);
    color: rgba(255, 255, 255, 0.92);
    transform: translate(2px, -2px);
  }

  @media (max-width: 640px) {
    .projectInner { gap: 12px; }
  }
</style>
